\documentclass[a4paper,11pt,twoside]{book}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage[ngerman,american]{babel}
\usepackage[babel]{csquotes}
\usepackage{hyphenat}
\usepackage[babel]{microtype}

\usepackage{xspace}
\usepackage[onehalfspacing]{setspace}
\usepackage{emptypage}              % Don't put header/footer on empty pages
\usepackage[
  a4paper,
  twoside,
  bindingoffset=1cm,
  bmargin=3cm,
  hmargin=3cm
]{geometry}
\usepackage[usenames,dvipsnames,table]{xcolor}

\usepackage{amsmath}

\usepackage[tableposition=top]{caption}
\usepackage[inline]{enumitem}       % Make enumerations a little more compact
\setlist{topsep=0pt,itemsep=2pt}
\setlist[1]{labelindent=6pt}

\usepackage{pdfpages}               % Include PDF pages without overfull boxes
\usepackage{rotating}
\usepackage{graphicx}

% Links and PDF properties
\usepackage[
  pdftitle={Dependency Browser for Program Comprehension and Change Impact Analysis of PLC Programs},
  pdfauthor={Peter Feichtinger},
  pdfsubject={Master Thesis},
  pdflang=en,
  colorlinks=true,
  allcolors=black,
  unicode=true,
  pdfstartview=
]{hyperref}

\usepackage[url=false]{biblatex}

% Section X.X in \autoref instead of Subsection X.X
\addto\extrasamerican{%
  \def\chapterautorefname{Chapter}
  \def\sectionautorefname{Section}
  \renewcommand{\subsectionautorefname}{\sectionautorefname}
  \renewcommand{\subsubsectionautorefname}{\sectionautorefname}
}

% There are some command definitions for listings mixed in there
\input{structure/listings.tex}

% Some geometry customization
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.5em plus 2pt minus 1.5pt}
\setlength{\headheight}{15pt}
\setlength{\tabcolsep}{8pt}

% Header and footer
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead{}
\fancyhead[ER]{\leftmark}
\fancyhead[OL]{\rightmark}
\fancyhead[OR,EL]{\thepage}
\fancyfoot{}

% Make plain pagestyle fancy
\makeatletter
  \let\ps@plain\ps@fancy
\makeatother

% Make chapter heading more compact
\makeatletter
\renewcommand{\@makechapterhead}[1]{%
  \vspace*{50\p@}%
  {\parindent \z@ \raggedright \normalfont\huge\bfseries
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
        \thechapter
        \hskip 1em
      \fi
    \fi
    \interlinepenalty\@M
    #1\par\nobreak
    \vskip 40\p@
  }}

\renewcommand{\@makeschapterhead}[1]{%
  \vspace*{50\p@}%
  {\parindent \z@ \raggedright \normalfont\huge\bfseries
    \interlinepenalty\@M
    #1\par\nobreak
    \vskip 40\p@
  }}
\makeatother

% Don't put "Chapter X" in the header
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{\thechapter.\ #1}}{}}
